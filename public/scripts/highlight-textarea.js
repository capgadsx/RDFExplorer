/**
 * Created by Deekshith Allamaneni on 3/31/16.
 */
"use strict";
// RegEx Used: /\b(?!(word1|word2)\b)\w+/gi
var clearTextTopWords = /[^a-zA-ZñÑáéíóúÁÉÍÓÚ](?!(de|la|que|el|en|y|a|los|se|del|las|un|por|con|no|una|su|para|es|al|lo|como|más|o|pero|sus|le|ha|me|si|sin|sobre|este|ya|entre|cuando|todo|esta|ser|son|dos|también|fue|había|era|muy|años|hasta|desde|está|mi|porque|qué|sólo|han|yo|hay|vez|puede|todos|así|nos|ni|parte|tiene|él|uno|donde|bien|tiempo|mismo|ese|ahora|cada|e|vida|otro|después|te|otros|aunque|esa|eso|hace|otra|gobierno|tan|durante|siempre|día|tanto|ella|tres|sí|dijo|sido|gran|país|según|menos|mundo|año|antes|estado|contra|sino|forma|caso|nada|hacer|general|estaba|poco|estos|presidente|mayor|ante|unos|les|algo|hacia|casa|ellos|ayer|hecho|primera|mucho|mientras|además|quien|momento|millones|esto|españa|hombre|están|pues|hoy|lugar|madrid|nacional|trabajo|otras|mejor|nuevo|decir|algunos|entonces|todas|días|debe|política|cómo|casi|toda|tal|luego|pasado|primer|medio|va|estas|sea|tenía|nunca|poder|aquí|ver|veces|embargo|partido|personas|grupo|cuenta|pueden|tienen|misma|nueva|cual|fueron|mujer|frente|josé|tras|cosas|fin|ciudad|he|social|manera|tener|sistema|será|historia|muchos|juan|tipo|cuatro|dentro|nuestro|punto|dice|ello|cualquier|noche|aún|agua|parece|haber|situación|fuera|bajo|grandes|nuestra|ejemplo|acuerdo|habían|usted|estados|hizo|nadie|países|horas|posible|tarde|ley|importante|guerra|desarrollo|proceso|realidad|sentido|lado|mí|tu|cambio|allí|mano|eran|estar|san|número|sociedad|unas|centro|padre|gente|final|relación|cuerpo|obra|incluso|través|último|madre|mis|modo|problemas|cinco|carlos|hombres|información|ojos|muerte|nombre|algunas|público|mujeres|siglo|todavía|meses|mañana|esos|nosotros|hora|muchas|pueblo|alguna|dar|problema|don|da|tú|derecho|verdad|maría|unidos|podría|sería|junto|cabeza|aquel|luis|cuanto|tierra|equipo|segundo|director|dicho|cierto|casos|manos|nivel|podía|familia|largo|partir|falta|llegar|propio|ministro|cosa|primero|seguridad|hemos|mal|trata|algún|tuvo|respecto|semana|varios|real|sé|voz|paso|señor|mil|quienes|proyecto|mercado|mayoría|luz|claro|iba|éste|pesetas|orden|español|buena|quiere|aquella|programa|palabras|internacional|van|esas|segunda|empresa|puesto|ahí|propia|m|libro|igual|político|persona|últimos|ellas|total|creo|tengo|dios|c|española|condiciones|méxico|fuerza|solo|único|acción|amor|policía|puerta|pesar|zona|sabe|calle|interior|tampoco|música|ningún|vista|campo|buen|hubiera|saber|obras|razón|ex|niños|presencia|tema|dinero|comisión|antonio|servicio|hijo|última|ciento|estoy|hablar|dio|minutos|producción|camino|seis|quién|fondo|dirección|papel|demás|barcelona|idea|especial|diferentes|dado|base|capital|ambos|europa|libertad|relaciones|espacio|medios|ir|actual|población|empresas|estudio|salud|servicios|haya|principio|siendo|cultura|anterior|alto|media|mediante|primeros|arte|paz|sector|imagen|medida|deben|datos|consejo|personal|interés|julio|grupos|miembros|ninguna|existe|cara|edad|etc|movimiento|visto|llegó|puntos|actividad|bueno|uso|niño|difícil|joven|futuro|aquellos|mes|pronto|soy|hacía|nuevos|nuestros|estaban|posibilidad|sigue|cerca|resultados|educación|atención|gonzález|capacidad|efecto|necesario|valor|aire|investigación|siguiente|figura|central|comunidad|necesidad|serie|organización|nuevas|calidad|economía|carácter|jefe|estamos|prensa|control|sociales|universidad|militar|cabo|diez|fuerzas|congreso|ésta|hijos|justicia|mundial|dólares|juego|económica|políticos|duda|recursos|pública|crisis|próximo|tenemos|decisión|varias|popular|tenido|apenas|época|banco|presente|menor|quiero|pasar|resultado|televisión|encuentra|gracias|ministerio|conjunto|defensa|alguien|queda|hacen|pasa|resto|causa|seguir|allá|palabra|voy|cuya|vamos|mar|estudios|derechos|importancia|cuales|contrario|manuel|garcía|fuerte|sol|jóvenes|apoyo|habría|civil|miguel|pedro|partidos|libre|fuentes|administración|común|dejar|cine|salir|comunicación|b|experiencia|demasiado|plan|respuesta|energía|izquierda|función|principal|superior|naturaleza|podemos|unión|especialmente|rey|domingo|favor|cantidad|elecciones|clase|productos|españoles|conocer|teatro|importantes|evitar|color|actividades|mesa|p|decía|cuyo|debido|alta|francisco|secretario|objeto|quizá|posición|parecía|natural|elementos|hubo|objetivo|formas|única|pueda|origen|blanco|mismos|lleva|económico|opinión|ayuda|oficial|silencio|buenos|pensar|república|dónde|sangre|encuentro|siquiera|autor|reunión|haciendo|suelo|muestra|viejo|encima|resulta|tomar|bastante|siete|lucha|pudo|amigos|línea|sur|pocos|medidas|norte|partes|iglesia|tratamiento|existencia|cargo|grande|américa|boca|plaza|pie|trabajadores|poner|existen|viene|permite|análisis|argentina|acto|hechos|tiempos|políticas|radio|puedo|crecimiento|francia|compañía|amigo|autoridades|realizar|acciones|padres|diario|ve|derecha|ambiente|i|habrá|precisamente|enfermedad|especie|ejército|santa|cambios|río|sabía|seguro|espera|momentos|viaje|quería|ocho|vivir|región|formación|escuela|cuarto|valores|quedó|participación|éxito|baja|artículo|principales|fernando|metros|marcha|régimen|consecuencia|conocimiento|corazón|campaña|estructura|efectos|finalmente|modelo|carta|construcción|médico|miedo|mayores|entrada|humanos|sean|actitud|deja|dejó|d|llevar|negro|texto|mitad|estuvo|alrededor|acerca|peso|humano|pequeño|fecha|serán|doctor|ideas|vino|materia|llega|carrera|cierta|sola|psoe|lejos|juez|características|riesgo|fácil|diferencia|cultural|libros|práctica|mayo|nuestras|programas|memoria|llegado|plazo|expresión|diciembre|mantener|enero|volver|cuadro|producto|produce|europea|conciencia|tenían|atrás|felipe|creación|chile|precio|película|puerto|fuego|cuestión|pasó|costa|supuesto|local|habla|aspectos|cuba|sala|cámara|vuelta|vía|mirada|mejores|informe|unidad|distintos|suerte|tales|mira|llamado|técnica|título|s|principios|octubre|volvió|período|g|encontrar|democracia|aumento|fútbol|prueba|consumo|pese|ocasiones|exterior|solución|u|hija|sueño|parís|capaz|ocasión|industria|adelante|salida|ciencia|asunto|asociación|puso|intereses|oro|podrá|pregunta|oposición|entrar|señora|señaló|santiago|dolor|zonas|comercio|operación|tribunal|instituciones|temas|militares|junio|marco|sectores|hacerlo|aspecto|razones|contenido|juicio|electoral|considera|tendrá|mucha|voluntad|dicen|recuerdo|socialista|área|aparece|vio|cama|aun|presenta|pp|revolución|busca|abril|rodríguez|fiscal|lópez|victoria|violencia|primeras|pequeña|armas|debía|ii|esfuerzo|humana|posibilidades|centros|profesional|asimismo|grado|has|toma|distintas|material|carne|llama|particular|jorge|trabajar|propuesta|muerto|precios|reforma|hermano|corte|comenzó|etapa|obstante|pone|diversos|visita|concepto|pacientes|semanas|tipos|solamente|deseo|sistemas|encuentran|siguientes|martín|suficiente|marzo|propios|jamás|dan|club|instituto|constitución|curso|lenguaje|estilo|rosa|imposible|pablo|buscar|peor|piel|arriba|generales|septiembre|blanca|r|aquellas|teoría|animales|hicieron|larga|perdido|imágenes|paciente|conseguir|máximo|noviembre|j|líder|hospital|diversas|rafael|vuelve|destino|torno|proyectos|flores|niveles|afirmó|explicó|n|somos|términos|premio|tercera|simple|trabajos|factores|fuente|cielo|ambas|mismas|fernández|actualmente|conocido|condición|ejercicio|cree|par|ocurre|ti|espíritu|lengua|responsabilidad|digo|pérez|distancia|organismo|cruz|evolución|realmente|alberto|francés|novela|alma|doble|anteriores|obtener|dije|selección|podido|nación|ido|crear|motivo|tercer|detrás|significa|empleo|escrito|departamento|contacto|casas|red|rostro|oportunidad|procesos|terreno|daba|calles|lista|nacionales|funciones|leyes|acceso|técnico|visión|preguntó|jesús|grave|tenga|lunes|aplicación|junta|lugares|verano|capítulo|éstos|pensamiento|york|frecuencia|gestión|viernes|javier|sitio|agosto|propiedad|profesionales|últimas|gusta|objetivos|movimientos|alcalde|ejecutivo|ciudadanos|necesidades|exposición|término|veinte|cuál|clara|altura|pequeños|presión|moral|lograr|comité|teléfono|asuntos|peligro|escena|gusto|palacio|hotel|colombia|aseguró|isla|guardia|confianza|ciudades|esperar|café|demanda|personajes|directamente|salió|discurso|sánchez|representantes|normal|pena|jugadores|supone|industrial|referencia|febrero|entender|esté|física|dejado|alimentos|pies|doña|protección|autores|marido|podrían|llamada|brazos|intervención|sal|páginas|nueve|pueblos|temporada|tus|abajo|aquello|maestro|internacionales|técnicas|estás|esposa|crítica|totalmente|perder|venta|finales|ramón|contar|diferencias|familiar|martínez|kilómetros|mala|fundamental|enorme|puedan|líneas|ofrece|comercial|pan|aires|profesor|inversión|municipal|declaraciones|funcionarios|aguas|responsable|sábado|alguno|federal|señala|conflicto|dicha|efe|dirigentes|cambiar|superficie|necesita|estudiantes|tantos|golpe|públicos|públicas|equipos|literatura|pruebas|alemania|circunstancias|tienes|documento|fiesta|simplemente|enrique|aceite|establecer|médicos|eres|locales|empezó|pobre|debería|llevó|parlamento|territorio|sale|treinta|coche|clases|afirma|oficiales|diálogo|vi|respeto|tratado|llevaba|revista|copa|pintura|nombres|propósito|leche|actualidad|constituye|tarea|alcanzar|competencia|normas|plata|vecinos|fenómeno|intención|dando|diputados|judicial|cualquiera|fe|jornada|italia|ganar|candidato|calor|esperanza|recién|suele|miles|ritmo|vive|quizás|pasos|sensación|representación|presidencia|triunfo|ayuntamiento|plantas|niña|frío|tono|compañeros|quieren|pesos|delante|propias|plano|enfermedades|institución|edificio|nota|franco|jugar|the|representa|gesto|mensaje|vasco|pudiera|gómez|influencia|pocas|realizado|conducta|objetos|tamaño|provincia|europeo|verde|informó|escribir|materiales|eduardo|cumplir|pidió|alumnos|ámbito|muertos|explica|consecuencias|refiere|comer|fines|versión|abierto|debate|barrio|labor|fondos|justo|tradición|diferente|piensa|tecnología|mantiene|situaciones|fase|histórico|agentes|planta|venezuela|f|actuación|iban|actos|posibles|león|mamá|velocidad|familiares|especies|cabe|asamblea|comunidades|museo|conferencia|prácticamente|autoridad|sujeto|alfonso|tratar|hacerse|pérdida|dificultades|rato|pagar|colegio|sabes|l|personaje|áreas|audiencia|doce|haga|periódico|v|distribución|ausencia|entrevista|recibió|añadió|cocina|edición|económicos|naturales|parecer|santo|vieja|mario|corresponde|decidió|perú|llegada|comienza|organizaciones|tendencia|escenario|definitiva|deberá|indicó|noticia|inglés|reina|ustedes|madera|alemán|habitantes|recibir|salvo|familias|miembro|escritor|conoce|cuidado|identidad|quiso|pareja|evidente|brasil|ciertos|siguen|declaración|cadena|acaba|consiste|presentación|cuentas|azul|década|puertas|comida|inmediato|marca|antiguo|rojo|debemos|instante|operaciones|iniciativa|caer|luna|veía|verdadero|habitación|manifestó|tío|quedado|martes|pleno|declaró|juegos|mínimo|aparición|estará|transporte|ven|pretende|tantas|sede|comportamiento|periodistas|animal|convertido|brazo|hermanos|rico|anunció|presupuesto|estrategia|naciones|utilizar|buenas|compromiso|acaso|completo|pelo|piedra|medicina|campos|liga|vaya|disposición|permanente|método|sentía|próxima|tierras|error|incremento|piso|socialistas|similar|viento|salvador|seres|posteriormente|dispuesto|poeta|económicas|secreto|funcionamiento|debajo|recordar|valencia|presentó|jueves|corriente|ingresos|intento|tuvieron|colores|altos|sevilla|hojas|probablemente|búsqueda|pequeñas|oferta|washington|cataluña|oficina|produjo|soldados|pasada|volumen|parecen|causas|dieron|división|darle|clave|ana|reciente|votos|logró|piernas|sirve|carmen|deuda|noticias|menores|querido|pago|fig|recuerda|podrán|independencia|ataque|igualmente|necesaria|quedan|regional|castro|decisiones|concepción|llegaron|siente|juntos|sabemos|ropa|parque|empresarios|conmigo|procedimiento|suma|elección|leer|feliz|ninguno|continuación|ministros|verdadera|reacción|podían|tanta|tomó|mente|tradicional|abierta|breve|aparecen|trataba|recibido|mejorar|ciertas|aparte|cárcel|entidad|investigaciones|temperatura|siento|londres|directa|portavoz|eta|responsables|ventana|contrato|elemento|privada|quince|veo|os|firma|incluye|pobres|vas|abogado|presentar|gobernador|próximos|jaime|hablando|canal|tráfico|capitán|personalidad|género|generación|documentos|espectáculo|vivo|tendría|preguntas|inmediatamente|cien|colaboración|hermana|conde|mío|federación|cincuenta|sorpresa|regiones|carga|bienes|masa|cartas|reyes|principalmente|puestos|sombra|andrés|criterios|abrir|cuyos|filosofía|miró|negra|margen|artista|constante|encontraba|gastos|morir|espacios|figuras|miércoles|venido|indica|comienzo|diseño|cuarenta|encontró|poesía|t|planes|ee|negocios|integración|caída|entrega|hacienda|acuerdos|preciso|cuello|banda|suyo|realiza|frase|bases|siglos|decidido|sentir|artistas|asegura|culpa|original|únicamente|unidades|ocurrió|sexo|entra|hayan|resolver|misión|caja|considerar|extranjeros|extremo|periodista|reducción|matrimonio|quieres|mas|películas|fui|laboral|importa|seguía|negocio|sexual|enseñanza|agregó|labios|resolución|fundación|hará|depende|diego|actor|técnicos|belleza|titular|roma|logrado|víctimas|detalles|europeos|caballo|huelga|carretera|norteamericano|producir|antigua|alianza|físico|sacar|publicidad|previsto|entorno|preocupación|resistencia|murió|éstas|saben|generalmente|h|dormir|individuo|cuerpos|corto|organismos|especiales|internet|bancos|jugador|esfuerzos|beneficios|terminar|equilibrio|oído|lectura|piezas|límites|aproximadamente|abre|david|llevado|privado|salón|roberto|actuales|graves|sonrisa|uu|foto|perspectiva|cifra|crédito|interesante|constitucional|aceptar|producido|bolsa|factor|noches|reconocimiento|juventud|habitual|categoría|requiere|fuese|impresión|llamar|duro|universal|explicar|presentan|realización|rápido|científicos|serio|científico|comprender|reino|preparación|síntomas|recuperación|utilización|fuertes|sonido|inteligencia|conversación|establece|hubiese|plena|venía|realizó|aznar|daniel|francesa|legal|abrió|alegría|ojo|ocurrido|díaz|vuelto|diputado|correspondiente|interna|musical|segundos|recientemente|empieza|decreto|china|pareció|células|suelen|perfectamente|azúcar|inversiones|concentración|espalda|producen|democrática|respondió|sucede|contexto|claramente|paredes|motivos|ciencias|tuve|isabel|argentino|inicio|mercados|métodos|estudiar|interpretación|culturales|prisión|llevan|amplio|queremos|apertura|dedos|vale|creer|voto|participar|corrupción|histórica|teresa|papá|voces|pienso|ángel|inicial|escala|estrellas|página|guatemala|temor|encontrado|compra|pensó|dudas|reconocer|máxima|actuar|reales|universo|directo|negociaciones|ricardo|instalaciones|artículos|aparato|lleno|intelectual|cifras|jardín|vacío|ciclo|valle|pensaba|forman|dirigente|pide|vehículos|cuestiones|puesta|llamó|ruiz|mostró|pecho|honor|pedir|formar|numerosos|seguramente|extraño|recurso|independiente|posiciones|sociedades|exteriores|cita|periodo|propuestas|empleados|teniendo|agencia|cuadros|partida|tensión|raúl|mirar|rica|mexicano|modelos|regreso|gobiernos|constituyen|absoluta|clima|criterio|latina|continúa|punta|amplia|registro|sesión|patria|posee|entró|servir|lluvia|ganado|pasando|construir|completa|personales|reducir|desarrollar|alcance|deporte|pacto|elaboración|quedaba|vicepresidente|alcohol|etcétera|fórmula|inferior|tasa|expertos|extranjero|diciendo|olvidar|presentes|pensando|esperaba|código|cooperación|fotografía|batalla|alternativa|nacido|árboles|penal|llena|siguió|hablaba|turismo|papeles|menudo|angel|papa|populares|estación)[^a-zA-ZñÑáéíóúÁÉÍÓÚ])\w+/gi;

var $backdrop = $('.backdrop');
var $highlights = $('.highlights');
var $textarea = $('#simple-textarea');

function applyHighlights(text) {
    text = text
        .replace(/\n$/g, '\n\n')
        .replace(clearTextTopWords, '<mark class="highlight-one-to-k">$&</mark>');
    return text;
}

function handleInput() {
    var text = $textarea.val();
    var highlightedText = applyHighlights(text);
    $highlights.html(highlightedText);
}

function handleScroll() {
    var scrollTop = $textarea.scrollTop();
    $backdrop.scrollTop(scrollTop);

    var scrollLeft = $textarea.scrollLeft();
    $backdrop.scrollLeft(scrollLeft);
}

function bindEvents() {
    $textarea.on({
        'input': handleInput,
        'scroll': handleScroll
    });
}

bindEvents();
handleInput();
